<!DOCTYPE html>
<html>
<head>
<title>Уличная жизнь магов</title>
<style>
.container {
text-align: center;
}

.button {
padding: 10px 20px;
margin: 10px;
border-radius: 5px;
background-color: #4CAF50;
color: white;
text-decoration: none;
}

.battle-actions {
display: flex;
justify-content: center;
margin-top: 20px;
}

.battle-actions button {
margin: 0 5px;
}

.move-log {
margin-top: 20px;
text-align: left;
}
</style>
</head>
<body>
<div class="container">
<h1>Уличная жизнь магов</h1>

<div id="character-selection">
<h2>Выберите мага:</h2>
<button class="button" onclick="selectMage('Маг 1')">Маг 1</button>
<button class="button" onclick="selectMage('Маг 2')">Маг 2</button>
</div>

<div id="battle" style="display: none;">
<h2>Битва</h2>
<p id="player-health">Здоровье мага: 10</p>
<p id="enemy-health">Здоровье противника: 10</p>
<p id="move-counter">Ход: 0</p>
<div class="battle-actions">
<button class="button" onclick="playerMove('attack')">Атака</button>
<button class="button" onclick="playerMove('defend')">Защита</button>
<button class="button" onclick="playerMove('prepare')">Подготовка</button>
</div>
<div class="move-log">
<h3>Лог ходов:</h3>
<div id="log"></div>
</div>
</div>

<script>
let playerHealth = 10;
let enemyHealth = 10;
let currentPlayer;
let isPlayerTurn = true;
let moveCounter = 0;

function selectMage(mage) {
currentPlayer = mage;
document.getElementById("character-selection").style.display = "none";
document.getElementById("battle").style.display = "block";
displayMoveCounter();
}

function playerMove(action) {
document.getElementById("log").innerHTML += `<p>Ход ${moveCounter + 1}: ${currentPlayer} выбрал ${getMoveName(action)}</p>`;
moveCounter++;
performMove(action);
}

function performMove(action) {
switch (action) {
case "attack":
if (isPlayerTurn) {
enemyHealth -= 2;
document.getElementById("enemy-health").innerHTML = `Здоровье противника: ${enemyHealth}`;
} else {
playerHealth -= 2;
document.getElementById("player-health").innerHTML = `Здоровье мага: ${playerHealth}`;
}
break;

case "defend":
if (!isPlayerTurn) {
playerHealth = 10;
document.getElementById("player-health").innerHTML = `Здоровье мага: ${playerHealth}`;
}
break;

case "prepare":
if (isPlayerTurn) {
playerAttack = 2;
}
break;
}

if (action !== "prepare") {
endTurn();
} else {
displayMoveCounter();
isPlayerTurn = false;
setTimeout(() => {
enemyTurn();
}, 1000);
}
}

function enemyTurn() {
const randomAction = Math.floor(Math.random() * 3);
const actions = ["attack", "defend", "prepare"];
const selectedAction = actions[randomAction];
document.getElementById("log").innerHTML += `<p>Ход ${moveCounter + 1}: Противник выбрал ${getMoveName(selectedAction)}</p>`;
moveCounter++;
performMove(selectedAction);
}

function endTurn() {
if (playerHealth <= 0) {
alert("Вы проиграли!");
window.location.reload();
} else if (enemyHealth <= 0) {
alert("Вы победили!");
window.location.reload();
} else {
isPlayerTurn = true;
displayMoveCounter();
}
}

function displayMoveCounter() {
document.getElementById("move-counter").innerHTML = `Ход: ${moveCounter}`;
}

function getMoveName(action) {
switch (action) {
case "attack":
return "Атака";
case "defend":
return "Защита";
case "prepare":
return "Подготовка";
default:
return "";
}
}
</script>
</div>
</body>
</html>
